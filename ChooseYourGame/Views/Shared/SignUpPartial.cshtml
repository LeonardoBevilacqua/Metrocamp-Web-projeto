@model AccountViewModel
<!-- create account modal-->

<div id="modal-account" class="uk-modal-container" data-uk-modal>
    <div class="uk-modal-dialog">
        <button class="uk-modal-close-default" type="button" data-uk-close></button>
        <div class="uk-modal-header">
            <h2 class="uk-modal-title uk-text-lead coolvetica-rg">Crie sua conta</h2>
        </div>
        <div class="uk-modal-body">
            <!-- cyw.com/users/signup -->
            <form asp-action="SignUp" asp-controller="Home" method="post" id="signup" class="uk-form-stacked uk-margin-large">
                <div asp-validation-summary="All" id="AccountErrors"></div>

                <div class="uk-child-width-expand@m uk-grid" data-uk-grid>
                    <div>
                        <label class="uk-form-label" asp-for="Name">Nome</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" asp-for="Name" placeholder="Roberto" data-validation="required">
                        </div>
                    </div>

                    <div>
                        <label class="uk-form-label" asp-for="LastName">Sobrenome</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" asp-for="LastName" placeholder="Silva" data-validation="required">
                        </div>
                    </div>

                </div>

                <div class="uk-margin">
                    <label class="uk-form-label" asp-for="EMail">E-Mail</label>
                    <div class="uk-form-controls">
                        <input class="uk-input" asp-for="EMail" placeholder="Email@email.com" data-validation="required email">
                    </div>
                </div>

                <div class="uk-child-width-expand@s uk-grid" data-uk-grid>
                    <div>
                        <label class="uk-form-label" asp-for="UserName">Nome de usuário</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" asp-for="UserName" placeholder="XXXXXXX" data-validation="required length alphanumeric" data-validation-length="3-12" data-validation-error-msg="Nome de usuário deve ser um valor alfanumericos, de tamanho 3-12 caracteres">
                        </div>
                    </div>

                    <div>
                        <label class="uk-form-label" asp-for="Password_Confirmation">Senha</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" asp-for="Password_Confirmation" placeholder="********" data-validation="required strength" data-validation-strength="2">
                        </div>
                    </div>

                    <div>
                        <label class="uk-form-label" asp-for="Password">Confirme a senha</label>
                        <div class="uk-form-controls">
                            <input class="uk-input" asp-for="Password" placeholder="********" data-validation="required Confirmation">
                        </div>
                    </div>

                </div>

        </div>
        <div class="uk-modal-footer uk-text-left uk-flex">
            <button class="uk-button uk-button-default uk-modal-close uk-width-1-2@m" type="button">Cancelar</button>
            <button class="uk-button uk-button-primary uk-width-1-2@m" type="submit">Criar conta</button>
        </div>
        </form>
    </div>
</div>
<script>
    $("#signup").submit(function(e) {
        var errorContent = $("#AccountErrors ul");
        $(errorContent).html("");
        e.preventDefault();

        $.ajax({
            type: $(this).attr("method"),
            url: $(this).attr("action"),
            data: $(this).serialize(),
            success: function(data) {
                if (data.succeeded) {
                    var url = "http://" + window.location.host + "/Home/Main";
                    window.location.href= url;
                } else {
                    $.each(data.value, function(key, value) {
                        $(errorContent).append($("<li>" + value[0] + "</li>"));
                    });
                }


            }
        });
    });
</script>
<!-- end create account modal-->